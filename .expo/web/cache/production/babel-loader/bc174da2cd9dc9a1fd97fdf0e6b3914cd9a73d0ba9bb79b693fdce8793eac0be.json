{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import PropTypes from'prop-types';import React from'react';import Linking from\"react-native-web/dist/exports/Linking\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import ParsedText from'react-native-parsed-text';import{StylePropType}from\"./utils\";import{useChatContext}from\"./GiftedChatContext\";import{error}from\"./logging\";import{jsx as _jsx}from\"react/jsx-runtime\";var WWW_URL_PATTERN=/^www\\./i;var _StyleSheet$create=StyleSheet.create({textStyle:{fontSize:16,lineHeight:20,marginTop:5,marginBottom:5,marginLeft:10,marginRight:10}}),textStyle=_StyleSheet$create.textStyle;var styles={left:StyleSheet.create({container:{},text:_objectSpread({color:'black'},textStyle),link:{color:'black',textDecorationLine:'underline'}}),right:StyleSheet.create({container:{},text:_objectSpread({color:'white'},textStyle),link:{color:'white',textDecorationLine:'underline'}})};var DEFAULT_OPTION_TITLES=['Call','Text','Cancel'];export function MessageText(_ref){var _ref$currentMessage=_ref.currentMessage,currentMessage=_ref$currentMessage===void 0?{}:_ref$currentMessage,_ref$optionTitles=_ref.optionTitles,optionTitles=_ref$optionTitles===void 0?DEFAULT_OPTION_TITLES:_ref$optionTitles,_ref$position=_ref.position,position=_ref$position===void 0?'left':_ref$position,containerStyle=_ref.containerStyle,textStyle=_ref.textStyle,linkStyleProp=_ref.linkStyle,customTextStyle=_ref.customTextStyle,_ref$parsePatterns=_ref.parsePatterns,parsePatterns=_ref$parsePatterns===void 0?function(){return[];}:_ref$parsePatterns,textProps=_ref.textProps;var _useChatContext=useChatContext(),actionSheet=_useChatContext.actionSheet;var onUrlPress=function onUrlPress(url){if(WWW_URL_PATTERN.test(url)){onUrlPress(`https://${url}`);}else{Linking.openURL(url).catch(function(e){error(e,'No handler for URL:',url);});}};var onPhonePress=function onPhonePress(phone){var options=optionTitles&&optionTitles.length>0?optionTitles.slice(0,3):DEFAULT_OPTION_TITLES;var cancelButtonIndex=options.length-1;actionSheet().showActionSheetWithOptions({options:options,cancelButtonIndex:cancelButtonIndex},function(buttonIndex){switch(buttonIndex){case 0:Linking.openURL(`tel:${phone}`).catch(function(e){error(e,'No handler for telephone');});break;case 1:Linking.openURL(`sms:${phone}`).catch(function(e){error(e,'No handler for text');});break;default:break;}});};var onEmailPress=function onEmailPress(email){return Linking.openURL(`mailto:${email}`).catch(function(e){return error(e,'No handler for mailto');});};var linkStyle=[styles[position].link,linkStyleProp&&linkStyleProp[position]];return _jsx(View,{style:[styles[position].container,containerStyle&&containerStyle[position]],children:_jsx(ParsedText,{style:[styles[position].text,textStyle&&textStyle[position],customTextStyle],parse:[].concat(_toConsumableArray(parsePatterns(linkStyle)),[{type:'url',style:linkStyle,onPress:onUrlPress},{type:'phone',style:linkStyle,onPress:onPhonePress},{type:'email',style:linkStyle,onPress:onEmailPress}]),childrenProps:_objectSpread({},textProps),children:currentMessage.text})});}MessageText.propTypes={position:PropTypes.oneOf(['left','right']),optionTitles:PropTypes.arrayOf(PropTypes.string),currentMessage:PropTypes.object,containerStyle:PropTypes.shape({left:StylePropType,right:StylePropType}),textStyle:PropTypes.shape({left:StylePropType,right:StylePropType}),linkStyle:PropTypes.shape({left:StylePropType,right:StylePropType}),parsePatterns:PropTypes.func,textProps:PropTypes.object,customTextStyle:StylePropType};","map":{"version":3,"names":["PropTypes","React","Linking","StyleSheet","View","ParsedText","StylePropType","useChatContext","error","jsx","_jsx","WWW_URL_PATTERN","_StyleSheet$create","create","textStyle","fontSize","lineHeight","marginTop","marginBottom","marginLeft","marginRight","styles","left","container","text","_objectSpread","color","link","textDecorationLine","right","DEFAULT_OPTION_TITLES","MessageText","_ref","_ref$currentMessage","currentMessage","_ref$optionTitles","optionTitles","_ref$position","position","containerStyle","linkStyleProp","linkStyle","customTextStyle","_ref$parsePatterns","parsePatterns","textProps","_useChatContext","actionSheet","onUrlPress","url","test","openURL","catch","e","onPhonePress","phone","options","length","slice","cancelButtonIndex","showActionSheetWithOptions","buttonIndex","onEmailPress","email","style","children","parse","concat","_toConsumableArray","type","onPress","childrenProps","propTypes","oneOf","arrayOf","string","object","shape","func"],"sources":["../src/MessageText.tsx"],"sourcesContent":[null],"mappings":"wvBAAA,MAAO,CAAAA,SAAS,KAAM,YAAY,CAClC,MAAO,CAAAC,KAAK,KAAM,OAAO,QAAAC,OAAA,oDAAAC,UAAA,uDAAAC,IAAA,0CAYzB,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CAEjD,OAASC,aAAa,eACtB,OAASC,cAAc,2BACvB,OAASC,KAAK,iBAAmB,OAAAC,GAAA,IAAAC,IAAA,yBAEjC,GAAM,CAAAC,eAAe,CAAG,SAAS,CAEjC,IAAAC,kBAAA,CAAsBT,UAAU,CAACU,MAAM,CAAC,CACtCC,SAAS,CAAE,CACTC,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,EAAE,CACdC,SAAS,CAAE,CAAC,CACZC,YAAY,CAAE,CAAC,CACfC,UAAU,CAAE,EAAE,CACdC,WAAW,CAAE,E,EAEhB,CAAC,CATMN,SAAS,CAAAF,kBAAA,CAATE,SAAS,CAWjB,GAAM,CAAAO,MAAM,CAAG,CACbC,IAAI,CAAEnB,UAAU,CAACU,MAAM,CAAC,CACtBU,SAAS,CAAE,EAAE,CACbC,IAAI,CAAAC,aAAA,EACFC,KAAK,CAAE,OAAO,EACXZ,SAAS,CACb,CACDa,IAAI,CAAE,CACJD,KAAK,CAAE,OAAO,CACdE,kBAAkB,CAAE,W,EAEvB,CAAC,CACFC,KAAK,CAAE1B,UAAU,CAACU,MAAM,CAAC,CACvBU,SAAS,CAAE,EAAE,CACbC,IAAI,CAAAC,aAAA,EACFC,KAAK,CAAE,OAAO,EACXZ,SAAS,CACb,CACDa,IAAI,CAAE,CACJD,KAAK,CAAE,OAAO,CACdE,kBAAkB,CAAE,W,EAEvB,C,CACF,CAED,GAAM,CAAAE,qBAAqB,CAAG,CAAC,MAAM,CAAE,MAAM,CAAE,QAAQ,CAAC,CAcxD,MAAM,SAAU,CAAAC,WAAWA,CAAAC,IAAA,CAUE,KAAAC,mBAAA,CAAAD,IAAA,CAT3BE,cAAc,CAAdA,cAAc,CAAAD,mBAAA,UAAG,EAAc,CAAAA,mBAAA,CAAAE,iBAAA,CAAAH,IAAA,CAC/BI,YAAY,CAAZA,YAAY,CAAAD,iBAAA,UAAGL,qBAAqB,CAAAK,iBAAA,CAAAE,aAAA,CAAAL,IAAA,CACpCM,QAAQ,CAARA,QAAQ,CAAAD,aAAA,UAAG,MAAM,CAAAA,aAAA,CACjBE,cAAc,CAAAP,IAAA,CAAdO,cAAc,CACdzB,SAAS,CAAAkB,IAAA,CAATlB,SAAS,CACE0B,aAAa,CAAAR,IAAA,CAAxBS,SAAS,CACTC,eAAe,CAAAV,IAAA,CAAfU,eAAe,CAAAC,kBAAA,CAAAX,IAAA,CACfY,aAAa,CAAbA,aAAa,CAAAD,kBAAA,UAAG,iBAAM,EAAE,GAAAA,kBAAA,CACxBE,SAAS,CAAAb,IAAA,CAATa,SAAS,CAET,IAAAC,eAAA,CAAwBvC,cAAc,EAAE,CAAhCwC,WAAW,CAAAD,eAAA,CAAXC,WAAW,CAWnB,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,GAAW,CAAI,CAGjC,GAAItC,eAAe,CAACuC,IAAI,CAACD,GAAG,CAAC,CAAE,CAC7BD,UAAU,CAAC,WAAWC,GAAG,EAAE,CAAC,C,CAC7B,IAAM,CACL/C,OAAO,CAACiD,OAAO,CAACF,GAAG,CAAC,CAACG,KAAK,CAAC,SAAAC,CAAC,CAAG,CAC7B7C,KAAK,CAAC6C,CAAC,CAAE,qBAAqB,CAAEJ,GAAG,CAAC,CACtC,CAAC,CAAC,C,CAEN,CAAC,CAED,GAAM,CAAAK,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAa,CAAI,CACrC,GAAM,CAAAC,OAAO,CACXpB,YAAY,EAAIA,YAAY,CAACqB,MAAM,CAAG,CAAC,CACnCrB,YAAY,CAACsB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CACxB5B,qBAAqB,CAC3B,GAAM,CAAA6B,iBAAiB,CAAGH,OAAO,CAACC,MAAM,CAAG,CAAC,CAC5CV,WAAW,EAAE,CAACa,0BAA0B,CACtC,CACEJ,OAAO,CAAPA,OAAO,CACPG,iBAAiB,CAAjBA,iB,CACD,CACD,SAACE,WAAmB,CAAI,CACtB,OAAQA,WAAW,EACjB,IAAK,EAAC,CACJ3D,OAAO,CAACiD,OAAO,CAAC,OAAOI,KAAK,EAAE,CAAC,CAACH,KAAK,CAAC,SAAAC,CAAC,CAAG,CACxC7C,KAAK,CAAC6C,CAAC,CAAE,0BAA0B,CAAC,CACtC,CAAC,CAAC,CACF,MACF,IAAK,EAAC,CACJnD,OAAO,CAACiD,OAAO,CAAC,OAAOI,KAAK,EAAE,CAAC,CAACH,KAAK,CAAC,SAAAC,CAAC,CAAG,CACxC7C,KAAK,CAAC6C,CAAC,CAAE,qBAAqB,CAAC,CACjC,CAAC,CAAC,CACF,MACF,QACE,M,CAEN,CAAC,CACF,CACH,CAAC,CAED,GAAM,CAAAS,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAa,QACjC,CAAA7D,OAAO,CAACiD,OAAO,CAAC,UAAUY,KAAK,EAAE,CAAC,CAACX,KAAK,CAAC,SAAAC,CAAC,QACxC,CAAA7C,KAAK,CAAC6C,CAAC,CAAE,uBAAuB,CAAC,GAClC,GAEH,GAAM,CAAAZ,SAAS,CAAG,CAChBpB,MAAM,CAACiB,QAAQ,CAAC,CAACX,IAAI,CACrBa,aAAa,EAAIA,aAAa,CAACF,QAAQ,CAAC,CACzC,CACD,MACE,CAAA5B,IAAA,CAACN,IAAI,EACH4D,KAAK,CAAE,CACL3C,MAAM,CAACiB,QAAQ,CAAC,CAACf,SAAS,CAC1BgB,cAAc,EAAIA,cAAc,CAACD,QAAQ,CAAC,CAC1C,CAAA2B,QAAA,CAEFvD,IAAA,CAACL,UAAU,EACT2D,KAAK,CAAE,CACL3C,MAAM,CAACiB,QAAQ,CAAC,CAACd,IAAI,CACrBV,SAAS,EAAIA,SAAS,CAACwB,QAAQ,CAAC,CAChCI,eAAe,CACf,CACFwB,KAAK,IAAAC,MAAA,CAAAC,kBAAA,CACAxB,aAAc,CAACH,SAAsB,CAAC,GACzC,CAAE4B,IAAI,CAAE,KAAK,CAAEL,KAAK,CAAEvB,SAAS,CAAE6B,OAAO,CAAEtB,UAAU,CAAE,CACtD,CAAEqB,IAAI,CAAE,OAAO,CAAEL,KAAK,CAAEvB,SAAS,CAAE6B,OAAO,CAAEhB,YAAY,CAAE,CAC1D,CAAEe,IAAI,CAAE,OAAO,CAAEL,KAAK,CAAEvB,SAAS,CAAE6B,OAAO,CAAER,YAAY,CAAE,EAC1D,CACFS,aAAa,CAAA9C,aAAA,IAAOoB,SAAS,CAAG,CAAAoB,QAAA,CAE/B/B,cAAe,CAACV,IAAI,CACX,CACd,CAAM,CAAC,CAEX,CAEAO,WAAW,CAACyC,SAAS,CAAG,CACtBlC,QAAQ,CAAEtC,SAAS,CAACyE,KAAK,CAAC,CAAC,MAAM,CAAE,OAAO,CAAC,CAAC,CAC5CrC,YAAY,CAAEpC,SAAS,CAAC0E,OAAO,CAAC1E,SAAS,CAAC2E,MAAM,CAAC,CACjDzC,cAAc,CAAElC,SAAS,CAAC4E,MAAM,CAChCrC,cAAc,CAAEvC,SAAS,CAAC6E,KAAK,CAAC,CAC9BvD,IAAI,CAAEhB,aAAa,CACnBuB,KAAK,CAAEvB,a,CACR,CAAC,CACFQ,SAAS,CAAEd,SAAS,CAAC6E,KAAK,CAAC,CACzBvD,IAAI,CAAEhB,aAAa,CACnBuB,KAAK,CAAEvB,a,CACR,CAAC,CACFmC,SAAS,CAAEzC,SAAS,CAAC6E,KAAK,CAAC,CACzBvD,IAAI,CAAEhB,aAAa,CACnBuB,KAAK,CAAEvB,a,CACR,CAAC,CACFsC,aAAa,CAAE5C,SAAS,CAAC8E,IAAI,CAC7BjC,SAAS,CAAE7C,SAAS,CAAC4E,MAAM,CAC3BlC,eAAe,CAAEpC,a,CAClB"},"metadata":{},"sourceType":"module","externalDependencies":[]}