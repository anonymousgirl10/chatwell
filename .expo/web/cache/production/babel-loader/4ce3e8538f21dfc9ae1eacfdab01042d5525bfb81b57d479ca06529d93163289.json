{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}import PropTypes from'prop-types';import React,{useState,useMemo}from'react';import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{useCallbackOne}from'use-memo-one';import Color from\"./Color\";import{StylePropType}from\"./utils\";import{warning}from\"./logging\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var styles=StyleSheet.create({container:{flexDirection:'row',flexWrap:'wrap',maxWidth:300},quickReply:{justifyContent:'center',alignItems:'center',borderWidth:1,maxWidth:200,paddingVertical:7,paddingHorizontal:12,minHeight:50,borderRadius:13,margin:3},quickReplyText:{overflow:'visible'},sendLink:{borderWidth:0},sendLinkText:{color:Color.defaultBlue,fontWeight:'600',fontSize:17}});var sameReply=function sameReply(currentReply){return function(reply){return currentReply.value===reply.value;};};var diffReply=function diffReply(currentReply){return function(reply){return currentReply.value!==reply.value;};};export function QuickReplies(_ref){var currentMessage=_ref.currentMessage,nextMessage=_ref.nextMessage,_ref$color=_ref.color,color=_ref$color===void 0?Color.peterRiver:_ref$color,quickReplyStyle=_ref.quickReplyStyle,quickReplyTextStyle=_ref.quickReplyTextStyle,onQuickReply=_ref.onQuickReply,_ref$sendText=_ref.sendText,sendText=_ref$sendText===void 0?'Send':_ref$sendText,renderQuickReplySend=_ref.renderQuickReplySend;var type=currentMessage.quickReplies.type;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),replies=_useState2[0],setReplies=_useState2[1];var shouldComponentDisplay=useMemo(function(){var hasReplies=!!currentMessage&&!!currentMessage.quickReplies;var hasNext=!!nextMessage&&!!nextMessage._id;var keepIt=currentMessage.quickReplies.keepIt;if(hasReplies&&!hasNext){return true;}if(hasReplies&&hasNext&&keepIt){return true;}return false;},[currentMessage,nextMessage]);var handlePress=useCallbackOne(function(reply){return function(){if(currentMessage){var _type=currentMessage.quickReplies.type;switch(_type){case'radio':{handleSend([reply])();return;}case'checkbox':{if(replies.find(sameReply(reply))){setReplies(replies.filter(diffReply(reply)));}else{setReplies([].concat(_toConsumableArray(replies),[reply]));}return;}default:{warning(`onQuickReply unknown type: ${_type}`);return;}}}};},[replies,currentMessage]);var handleSend=function handleSend(repliesData){return function(){onQuickReply===null||onQuickReply===void 0?void 0:onQuickReply(repliesData.map(function(reply){return _objectSpread(_objectSpread({},reply),{},{messageId:currentMessage._id});}));};};if(!shouldComponentDisplay){return null;}return _jsxs(View,{style:styles.container,children:[currentMessage.quickReplies.values.map(function(reply,index){var selected=type==='checkbox'&&replies.find(sameReply(reply));return _jsx(TouchableOpacity,{onPress:handlePress(reply),style:[styles.quickReply,quickReplyStyle,{borderColor:color},selected&&{backgroundColor:color}],children:_jsx(Text,{numberOfLines:10,ellipsizeMode:'tail',style:[styles.quickReplyText,{color:selected?Color.white:color},quickReplyTextStyle],children:reply.title})},`${reply.value}-${index}`);}),replies.length>0&&_jsx(TouchableOpacity,{style:[styles.quickReply,styles.sendLink],onPress:handleSend(replies),children:(renderQuickReplySend===null||renderQuickReplySend===void 0?void 0:renderQuickReplySend())||_jsx(Text,{style:styles.sendLinkText,children:sendText})})]});}QuickReplies.propTypes={currentMessage:PropTypes.object.isRequired,onQuickReply:PropTypes.func,color:PropTypes.string,sendText:PropTypes.string,renderQuickReplySend:PropTypes.func,quickReplyStyle:StylePropType};","map":{"version":3,"names":["PropTypes","React","useState","useMemo","Text","StyleSheet","View","TouchableOpacity","useCallbackOne","Color","StylePropType","warning","jsx","_jsx","jsxs","_jsxs","styles","create","container","flexDirection","flexWrap","maxWidth","quickReply","justifyContent","alignItems","borderWidth","paddingVertical","paddingHorizontal","minHeight","borderRadius","margin","quickReplyText","overflow","sendLink","sendLinkText","color","defaultBlue","fontWeight","fontSize","sameReply","currentReply","reply","value","diffReply","QuickReplies","_ref","currentMessage","nextMessage","_ref$color","peterRiver","quickReplyStyle","quickReplyTextStyle","onQuickReply","_ref$sendText","sendText","renderQuickReplySend","type","quickReplies","_useState","_useState2","_slicedToArray","replies","setReplies","shouldComponentDisplay","hasReplies","hasNext","_id","keepIt","handlePress","handleSend","find","filter","concat","_toConsumableArray","repliesData","map","_objectSpread","messageId","style","children","values","index","selected","onPress","borderColor","backgroundColor","numberOfLines","ellipsizeMode","white","title","length","propTypes","object","isRequired","func","string"],"sources":["../src/QuickReplies.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}