{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Button from\"react-native-web/dist/exports/Button\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import{GiftedChat}from'react-native-gifted-chat';import{v4 as uuidv4}from'uuid';import firebase from'firebase/compat/app';import'firebase/compat/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var firebaseConfig={apiKey:\"AIzaSyCR8YftV3NFxj4EOWK9CUg7qyBYUIQDJxw\",authDomain:\"chatwell-f6d64.firebaseapp.com\",databaseURL:\"https://chatwell-f6d64-default-rtdb.asia-southeast1.firebasedatabase.app\",projectId:\"chatwell-f6d64\",storageBucket:\"chatwell-f6d64.appspot.com\",messagingSenderId:\"840890098692\",appId:\"1:840890098692:web:2964f92d61f78f2c5f4151\",measurementId:\"G-HFFK6220FT\"};if(!firebase.apps.length){firebase.initializeApp(firebaseConfig);}var db=firebase.firestore();export default function ChatScreen(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];useEffect(function(){if(user){var unsubscribe=db.collection('messages').orderBy('createdAt','desc').onSnapshot(function(querySnapshot){var newMessages=querySnapshot.docs.map(function(doc){var data=doc.data();return{_id:doc.id,text:data.text||'',createdAt:data.createdAt?data.createdAt.toDate():new Date(),user:data.user||{}};});setMessages(newMessages);});return function(){return unsubscribe();};}},[user]);var renderHeader=function renderHeader(){return _jsxs(View,{style:styles.header,children:[_jsx(Text,{style:styles.appName,children:\"ChatWell\"}),_jsx(Text,{style:styles.appName1,children:\"Group's\"})]});};var handleStartChat=function handleStartChat(){if(userName.trim()!==''){var userId=uuidv4();setUser({_id:userId,name:userName});}else{Alert.alert('Please fill in your name to start the chat.');}};var _onSend=function onSend(){var newMessages=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];newMessages.forEach(function(message){db.collection('messages').add({text:message.text,createdAt:firebase.firestore.FieldValue.serverTimestamp(),user:message.user});});};var renderUserNameInput=function renderUserNameInput(){return _jsxs(View,{style:styles.container,children:[_jsx(TextInput,{style:[styles.input,{marginTop:245,marginBottom:245,marginLeft:50,marginRight:50,fontSize:14}],placeholder:\"Enter your name\",onChangeText:function onChangeText(text){return setUserName(text);}}),_jsx(Button,{title:\"Start Chat\",onPress:handleStartChat})]});};return _jsxs(View,{style:styles.container,children:[renderHeader(),user?_jsx(GiftedChat,{messages:messages,onSend:function onSend(newMessages){return _onSend(newMessages);},user:user}):renderUserNameInput()]});}var styles=StyleSheet.create({container:{flex:1,backgroundColor:'#fff'},header:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',paddingHorizontal:20,paddingTop:20,backgroundColor:'#f5f5f5',borderBottomWidth:1,borderBottomColor:'#ddd'},appName:{fontSize:18,fontWeight:'bold'},appName1:{fontSize:9,fontWeight:'bold'},typingBar:{flexDirection:'row',alignItems:'center',paddingHorizontal:10,paddingVertical:5,borderTopWidth:1,borderTopColor:'#ccc'},input:{flex:1,height:40,borderWidth:1,borderColor:'#ccc',borderRadius:20,paddingHorizontal:10,marginRight:10},backButton:{alignSelf:'flex-start',marginTop:10}});","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","View","TextInput","Button","Text","Image","GiftedChat","v4","uuidv4","firebase","jsx","_jsx","jsxs","_jsxs","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","length","initializeApp","db","firestore","ChatScreen","_useState","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","userName","setUserName","_useState5","_useState6","user","setUser","unsubscribe","collection","orderBy","onSnapshot","querySnapshot","newMessages","docs","map","doc","data","_id","id","text","createdAt","toDate","Date","renderHeader","style","styles","header","children","appName","appName1","handleStartChat","trim","userId","name","Alert","alert","onSend","arguments","undefined","forEach","message","add","FieldValue","serverTimestamp","renderUserNameInput","container","input","marginTop","marginBottom","marginLeft","marginRight","fontSize","placeholder","onChangeText","title","onPress","create","flex","backgroundColor","flexDirection","justifyContent","alignItems","paddingHorizontal","paddingTop","borderBottomWidth","borderBottomColor","fontWeight","typingBar","paddingVertical","borderTopWidth","borderTopColor","height","borderWidth","borderColor","borderRadius","backButton","alignSelf"],"sources":["/home/whm/Documents/WHM/app/chatwell/chatwell/ChatScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { StyleSheet, View, TextInput, Button, Text, Image } from 'react-native';\nimport { GiftedChat } from 'react-native-gifted-chat';\nimport { v4 as uuidv4 } from 'uuid';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/firestore';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCR8YftV3NFxj4EOWK9CUg7qyBYUIQDJxw\",\n  authDomain: \"chatwell-f6d64.firebaseapp.com\",\n  databaseURL: \"https://chatwell-f6d64-default-rtdb.asia-southeast1.firebasedatabase.app\",\n  projectId: \"chatwell-f6d64\",\n  storageBucket: \"chatwell-f6d64.appspot.com\",\n  messagingSenderId: \"840890098692\",\n  appId: \"1:840890098692:web:2964f92d61f78f2c5f4151\",\n  measurementId: \"G-HFFK6220FT\"\n};\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n}\n\nconst db = firebase.firestore();\n\nexport default function ChatScreen() {\n  const [messages, setMessages] = useState([]);\n  const [userName, setUserName] = useState('');\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    if (user) {\n      const unsubscribe = db\n        .collection('messages')\n        .orderBy('createdAt', 'desc')\n        .onSnapshot((querySnapshot) => {\n          const newMessages = querySnapshot.docs.map((doc) => {\n            const data = doc.data();\n            return {\n              _id: doc.id,\n              text: data.text || '', // Ensure text is not null\n              createdAt: data.createdAt ? data.createdAt.toDate() : new Date(), // Handle potential null createdAt\n              user: data.user || {}, // Ensure user is not null\n            };\n          });\n          setMessages(newMessages);\n        });\n  \n      return () => unsubscribe();\n    }\n  }, [user]);\n\n  const renderHeader = () => {\n    return (\n      <View style={styles.header}>\n        <Text style={styles.appName}>ChatWell</Text><Text style={styles.appName1}>Group's</Text>\n      </View>\n    );\n  };\n\n\n  const handleStartChat = () => {\n    if (userName.trim() !== '') {\n      const userId = uuidv4();\n      setUser({ _id: userId, name: userName });\n    } else {\n      Alert.alert('Please fill in your name to start the chat.');\n    }\n  };\n\n  const onSend = (newMessages = []) => {\n    newMessages.forEach((message) => {\n      db.collection('messages').add({\n        text: message.text,\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n        user: message.user,\n      });\n    });\n  };\n\n  const renderUserNameInput = () => {\n    return (\n      <View style={styles.container}>\n        <TextInput\n          style={[\n            styles.input,\n            {\n              marginTop: 245,\n              marginBottom: 245,\n              marginLeft: 50,\n              marginRight: 50,\n              fontSize: 14, // Adjust the font size as needed\n            },\n          ]}\n          placeholder=\"Enter your name\"\n          onChangeText={(text) => setUserName(text)}\n        />\n        <Button title=\"Start Chat\" onPress={handleStartChat} />\n      </View>\n    );\n  };\n\n  return (\n    <View style={styles.container}>\n      {renderHeader()}\n      {user ? (\n        <GiftedChat\n          messages={messages}\n          onSend={(newMessages) => onSend(newMessages)}\n          user={user}\n        />\n      ) : (\n        renderUserNameInput()\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingTop: 20,\n    backgroundColor: '#f5f5f5',\n    borderBottomWidth: 1,\n    borderBottomColor: '#ddd',\n  },\n  appName: {\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  appName1: {\n    fontSize: 9,\n    fontWeight: 'bold',\n  },\n  \n  typingBar: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 10,\n    paddingVertical: 5,\n    borderTopWidth: 1,\n    borderTopColor: '#ccc',\n  },\n  input: {\n    flex: 1,\n    height: 40,\n    borderWidth: 1,\n    borderColor: '#ccc',\n    borderRadius: 20,\n    paddingHorizontal: 10,\n    marginRight: 10,\n  },\n  backButton: {\n    alignSelf: 'flex-start',\n    marginTop: 10,\n  },\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}