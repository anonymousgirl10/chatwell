{"ast":null,"code":"import{useRef}from\"react\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import Animated from\"react-native-web/dist/exports/Animated\";var now=function now(){return+new Date();};var _Dimensions$get=Dimensions.get(\"window\"),width=_Dimensions$get.width,height=_Dimensions$get.height;var INIT_POSITION={x:0,y:0};export var useGesture=function useGesture(_ref){var _ref$doubleTapGapTime=_ref.doubleTapGapTimer,doubleTapGapTimer=_ref$doubleTapGapTime===void 0?500:_ref$doubleTapGapTime,_ref$doubleTapAnimati=_ref.doubleTapAnimationDuration,doubleTapAnimationDuration=_ref$doubleTapAnimati===void 0?100:_ref$doubleTapAnimati,_ref$doubleTapZoomEna=_ref.doubleTapZoomEnabled,doubleTapZoomEnabled=_ref$doubleTapZoomEna===void 0?true:_ref$doubleTapZoomEna,doubleTapCallback=_ref.doubleTapCallback,doubleTapZoomToCenter=_ref.doubleTapZoomToCenter,_ref$doubleTapMaxZoom=_ref.doubleTapMaxZoom,doubleTapMaxZoom=_ref$doubleTapMaxZoom===void 0?2:_ref$doubleTapMaxZoom,_ref$doubleTapInitial=_ref.doubleTapInitialScale,doubleTapInitialScale=_ref$doubleTapInitial===void 0?1:_ref$doubleTapInitial,_ref$doubleTapZoomSte=_ref.doubleTapZoomStep,doubleTapZoomStep=_ref$doubleTapZoomSte===void 0?0.5:_ref$doubleTapZoomSte,_ref$UNSAFE_INNER_WID=_ref.UNSAFE_INNER_WIDTH__cropWidth,UNSAFE_INNER_WIDTH__cropWidth=_ref$UNSAFE_INNER_WID===void 0?width:_ref$UNSAFE_INNER_WID,_ref$UNSAFE_INNER_WID2=_ref.UNSAFE_INNER_WIDTH__cropHeight,UNSAFE_INNER_WIDTH__cropHeight=_ref$UNSAFE_INNER_WID2===void 0?height:_ref$UNSAFE_INNER_WID2,_ref$longPressGapTime=_ref.longPressGapTimer,longPressGapTimer=_ref$longPressGapTime===void 0?2000:_ref$longPressGapTime,longPressCallback=_ref.longPressCallback,useNativeDriver=_ref.useNativeDriver;var lastTapTimer=useRef(0);var longPressTimer=useRef();var isDoubleTaped=useRef(false);var isLongPressed=useRef(false);var coordinates=useRef(INIT_POSITION);var doubleTapScale=useRef(doubleTapInitialScale);var animatedScale=useRef(new Animated.Value(1));var animatedPositionX=useRef(new Animated.Value(INIT_POSITION.x));var animatedPositionY=useRef(new Animated.Value(INIT_POSITION.y));var animations=useRef();var init=function init(){isDoubleTaped.current=false;isLongPressed.current=false;};var release=function release(){if(longPressTimer.current)clearTimeout(longPressTimer.current);};var onDoubleTap=function onDoubleTap(e,gestureState){if(gestureState.numberActiveTouches>1)return;var nowTapTimer=now();if(nowTapTimer-lastTapTimer.current<doubleTapGapTimer){isDoubleTaped.current=true;lastTapTimer.current=0;if(doubleTapCallback)doubleTapCallback(e,gestureState);if(!doubleTapZoomEnabled)return;longPressTimer.current&&clearTimeout(longPressTimer.current);doubleTapScale.current=doubleTapScale.current+doubleTapInitialScale*doubleTapZoomStep;if(doubleTapScale.current>doubleTapMaxZoom){doubleTapScale.current=doubleTapInitialScale;}coordinates.current={x:e.nativeEvent.changedTouches[0].pageX,y:e.nativeEvent.changedTouches[0].pageY};if(doubleTapZoomToCenter){coordinates.current={x:UNSAFE_INNER_WIDTH__cropWidth/2,y:UNSAFE_INNER_WIDTH__cropHeight/2};}Animated.parallel([Animated.timing(animatedScale.current,{toValue:doubleTapScale.current,duration:doubleTapAnimationDuration,useNativeDriver:useNativeDriver}),Animated.timing(animatedPositionX.current,{toValue:(UNSAFE_INNER_WIDTH__cropWidth/2-coordinates.current.x)*(doubleTapScale.current-doubleTapInitialScale)/doubleTapScale.current,duration:doubleTapAnimationDuration,useNativeDriver:useNativeDriver}),Animated.timing(animatedPositionY.current,{toValue:(UNSAFE_INNER_WIDTH__cropHeight/2-coordinates.current.y)*(doubleTapScale.current-doubleTapInitialScale)/doubleTapScale.current,duration:doubleTapAnimationDuration,useNativeDriver:useNativeDriver})]).start();animations.current={transform:[{scale:animatedScale.current},{translateX:animatedPositionX.current},{translateY:animatedPositionY.current}]};}else{lastTapTimer.current=nowTapTimer;}};var onLongPress=function onLongPress(e,gestureState){if(longPressTimer.current){clearTimeout(longPressTimer.current);longPressTimer.current=null;}longPressTimer.current=setTimeout(function(){isLongPressed.current=true;if(longPressCallback){longPressCallback(e,gestureState);}},longPressGapTimer);};var reset=function reset(){animatedScale.current.setValue(doubleTapInitialScale);animatedPositionX.current.setValue(INIT_POSITION.x);animatedPositionY.current.setValue(INIT_POSITION.y);animations.current=void 0;};return[{onDoubleTap:onDoubleTap,reset:reset,init:init,release:release,onLongPress:onLongPress,isDoubleTaped:isDoubleTaped.current,isLongPressed:isLongPressed.current},animations.current];};","map":{"version":3,"names":["useRef","Dimensions","Animated","now","Date","_Dimensions$get","get","width","height","INIT_POSITION","x","y","useGesture","_ref","_ref$doubleTapGapTime","doubleTapGapTimer","_ref$doubleTapAnimati","doubleTapAnimationDuration","_ref$doubleTapZoomEna","doubleTapZoomEnabled","doubleTapCallback","doubleTapZoomToCenter","_ref$doubleTapMaxZoom","doubleTapMaxZoom","_ref$doubleTapInitial","doubleTapInitialScale","_ref$doubleTapZoomSte","doubleTapZoomStep","_ref$UNSAFE_INNER_WID","UNSAFE_INNER_WIDTH__cropWidth","_ref$UNSAFE_INNER_WID2","UNSAFE_INNER_WIDTH__cropHeight","_ref$longPressGapTime","longPressGapTimer","longPressCallback","useNativeDriver","lastTapTimer","longPressTimer","isDoubleTaped","isLongPressed","coordinates","doubleTapScale","animatedScale","Value","animatedPositionX","animatedPositionY","animations","init","current","release","clearTimeout","onDoubleTap","e","gestureState","numberActiveTouches","nowTapTimer","nativeEvent","changedTouches","pageX","pageY","parallel","timing","toValue","duration","start","transform","scale","translateX","translateY","onLongPress","setTimeout","reset","setValue"],"sources":["/home/whm/Documents/WHM/app/chatwell/chatwell/node_modules/react-native-lightbox-v2/dist/hooks/use-gesture.js"],"sourcesContent":["import { useRef } from \"react\";\nimport { Dimensions, Animated, } from \"react-native\";\n// -------------------------  default vars  ------------------------\nconst now = () => +new Date();\nconst { width, height } = Dimensions.get(\"window\");\nconst INIT_POSITION = { x: 0, y: 0 };\n// -------------------------  hooks  -------------------------\nexport const useGesture = ({ doubleTapGapTimer = 500, doubleTapAnimationDuration = 100, doubleTapZoomEnabled = true, doubleTapCallback, doubleTapZoomToCenter, doubleTapMaxZoom = 2, doubleTapInitialScale = 1, doubleTapZoomStep = 0.5, UNSAFE_INNER_WIDTH__cropWidth = width, UNSAFE_INNER_WIDTH__cropHeight = height, longPressGapTimer = 2000, longPressCallback, \n// longPressToSaveEnable = false,\nuseNativeDriver, }) => {\n    // last tap timer\n    const lastTapTimer = useRef(0);\n    // long press timer\n    const longPressTimer = useRef();\n    // if double taped\n    const isDoubleTaped = useRef(false);\n    // if long pressed\n    const isLongPressed = useRef(false);\n    // double tap coordinates\n    const coordinates = useRef(INIT_POSITION);\n    // double tap scale\n    const doubleTapScale = useRef(doubleTapInitialScale);\n    // animated\n    const animatedScale = useRef(new Animated.Value(1));\n    const animatedPositionX = useRef(new Animated.Value(INIT_POSITION.x));\n    const animatedPositionY = useRef(new Animated.Value(INIT_POSITION.y));\n    // animation style to export\n    const animations = useRef();\n    // init the status\n    const init = () => {\n        isDoubleTaped.current = false;\n        isLongPressed.current = false;\n    };\n    const release = () => {\n        if (longPressTimer.current)\n            clearTimeout(longPressTimer.current);\n    };\n    const onDoubleTap = (e, gestureState) => {\n        if (gestureState.numberActiveTouches > 1)\n            return;\n        const nowTapTimer = now();\n        // double tap\n        if ((nowTapTimer - lastTapTimer.current) < doubleTapGapTimer) {\n            isDoubleTaped.current = true;\n            lastTapTimer.current = 0;\n            // double tap callback\n            if (doubleTapCallback)\n                doubleTapCallback(e, gestureState);\n            // double tap zoom\n            if (!doubleTapZoomEnabled)\n                return;\n            // cancel long press\n            longPressTimer.current && clearTimeout(longPressTimer.current);\n            // next scale\n            doubleTapScale.current = doubleTapScale.current + doubleTapInitialScale * doubleTapZoomStep;\n            if (doubleTapScale.current > doubleTapMaxZoom) {\n                doubleTapScale.current = doubleTapInitialScale;\n            }\n            coordinates.current = {\n                x: e.nativeEvent.changedTouches[0].pageX,\n                y: e.nativeEvent.changedTouches[0].pageY,\n            };\n            if (doubleTapZoomToCenter) {\n                coordinates.current = {\n                    x: UNSAFE_INNER_WIDTH__cropWidth / 2,\n                    y: UNSAFE_INNER_WIDTH__cropHeight / 2,\n                };\n            }\n            Animated.parallel([\n                Animated.timing(animatedScale.current, {\n                    toValue: doubleTapScale.current,\n                    duration: doubleTapAnimationDuration,\n                    useNativeDriver,\n                }),\n                Animated.timing(animatedPositionX.current, {\n                    toValue: ((UNSAFE_INNER_WIDTH__cropWidth / 2 - coordinates.current.x) *\n                        (doubleTapScale.current - doubleTapInitialScale)) /\n                        doubleTapScale.current,\n                    duration: doubleTapAnimationDuration,\n                    useNativeDriver,\n                }),\n                Animated.timing(animatedPositionY.current, {\n                    toValue: ((UNSAFE_INNER_WIDTH__cropHeight / 2 - coordinates.current.y) *\n                        (doubleTapScale.current - doubleTapInitialScale)) /\n                        doubleTapScale.current,\n                    duration: doubleTapAnimationDuration,\n                    useNativeDriver,\n                }),\n            ]).start();\n            animations.current = {\n                transform: [\n                    {\n                        scale: animatedScale.current,\n                    },\n                    {\n                        translateX: animatedPositionX.current,\n                    },\n                    {\n                        translateY: animatedPositionY.current,\n                    },\n                ],\n            };\n        }\n        else {\n            lastTapTimer.current = nowTapTimer;\n        }\n    };\n    const onLongPress = (e, gestureState) => {\n        if (longPressTimer.current) {\n            clearTimeout(longPressTimer.current);\n            longPressTimer.current = null;\n        }\n        longPressTimer.current = setTimeout(() => {\n            isLongPressed.current = true;\n            if (longPressCallback) {\n                longPressCallback(e, gestureState);\n            }\n        }, longPressGapTimer);\n    };\n    // reset\n    const reset = () => {\n        // double tap animations reset\n        animatedScale.current.setValue(doubleTapInitialScale);\n        animatedPositionX.current.setValue(INIT_POSITION.x);\n        animatedPositionY.current.setValue(INIT_POSITION.y);\n        animations.current = void 0;\n    };\n    // todo pinch to zoom\n    return [\n        {\n            onDoubleTap,\n            reset,\n            init,\n            release,\n            onLongPress,\n            isDoubleTaped: isDoubleTaped.current,\n            isLongPressed: isLongPressed.current\n        },\n        animations.current,\n    ];\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}