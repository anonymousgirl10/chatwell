(()=>{"use strict";var e={2830:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T});var a=r(5004),n=r(6792),o=r(9385),i=r(1054),l=r(3693),d=r(5222),s=r(1666),f=r(885),u=r(6591),c=r(9206),p=r(4001),h=r(327),g=(r(9531),r(2629));h.default.apps.length||h.default.initializeApp({apiKey:"AIzaSyCR8YftV3NFxj4EOWK9CUg7qyBYUIQDJxw",authDomain:"chatwell-f6d64.firebaseapp.com",databaseURL:"https://chatwell-f6d64-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"chatwell-f6d64",storageBucket:"chatwell-f6d64.appspot.com",messagingSenderId:"840890098692",appId:"1:840890098692:web:2964f92d61f78f2c5f4151",measurementId:"G-HFFK6220FT"});var m=h.default.firestore();function b(){var e=(0,a.useState)([]),t=(0,f.default)(e,2),r=t[0],n=t[1],d=(0,a.useState)(""),s=(0,f.default)(d,2),b=s[0],y=s[1],v=(0,a.useState)(null),j=(0,f.default)(v,2),C=j[0],w=j[1];(0,a.useEffect)((function(){if(C){var e=m.collection("messages").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return{_id:e.id,text:t.text||"",createdAt:t.createdAt?t.createdAt.toDate():new Date,user:t.user||{}}}));n(t)}));return function(){return e()}}}),[C]);var S=function(){if(""!==b.trim()){var e=(0,p.v4)();w({_id:e,name:b})}else Alert.alert("Please fill in your name to start the chat.")};return(0,g.jsxs)(o.default,{style:x.container,children:[(0,g.jsxs)(o.default,{style:x.header,children:[(0,g.jsx)(i.default,{style:x.appName,children:"ChatWell"}),(0,g.jsx)(i.default,{style:x.appName1,children:"Group's"})]}),C?(0,g.jsx)(c.GiftedChat,{messages:r,onSend:function(e){return function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){m.collection("messages").add({text:e.text,createdAt:h.default.firestore.FieldValue.serverTimestamp(),user:e.user})}))}(e)},user:C}):(0,g.jsxs)(o.default,{style:x.container,children:[(0,g.jsx)(u.default,{style:[x.input,{marginTop:245,marginBottom:245,marginLeft:50,marginRight:50,fontSize:14}],placeholder:"Enter your name",onChangeText:function(e){return y(e)}}),(0,g.jsx)(l.default,{title:"Start Chat",onPress:S})]})]})}var x=n.default.create({container:{flex:1,backgroundColor:"#fff"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:20,paddingTop:20,backgroundColor:"#f5f5f5",borderBottomWidth:1,borderBottomColor:"#ddd"},appName:{fontSize:18,fontWeight:"bold"},appName1:{fontSize:9,fontWeight:"bold"},typingBar:{flexDirection:"row",alignItems:"center",paddingHorizontal:10,paddingVertical:5,borderTopWidth:1,borderTopColor:"#ccc"},input:{flex:1,height:40,borderWidth:1,borderColor:"#ccc",borderRadius:20,paddingHorizontal:10,marginRight:10},backButton:{alignSelf:"flex-start",marginTop:10}}),y=r(5861),v=r(3224);h.default.apps.length||h.default.initializeApp({apiKey:"AIzaSyCR8YftV3NFxj4EOWK9CUg7qyBYUIQDJxw",authDomain:"chatwell-f6d64.firebaseapp.com",databaseURL:"https://chatwell-f6d64-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"chatwell-f6d64",storageBucket:"chatwell-f6d64.appspot.com",messagingSenderId:"840890098692",appId:"1:840890098692:web:2964f92d61f78f2c5f4151",measurementId:"G-HFFK6220FT"});var j=h.default.firestore(),C=n.default.create({container:{flex:1,padding:10,backgroundColor:"#f5f5f5"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10,backgroundColor:"#fff",padding:10,borderRadius:5},headerText:{fontSize:16,fontWeight:"bold",color:"#333"},startButton:{backgroundColor:"#4CAF50",color:"#fff"},messagesContainer:{flex:1,marginTop:10},messageBox:{backgroundColor:"#fff",borderRadius:5,padding:10,marginVertical:5,borderColor:"#ddd",borderWidth:1},messageText:{fontSize:14,color:"#333"},inputContainer:{flexDirection:"row",alignItems:"center",marginTop:10,backgroundColor:"#fff",padding:10,borderRadius:5},input:{flex:1,borderColor:"#ddd",borderWidth:1,borderRadius:5,padding:10,marginRight:10,backgroundColor:"#f5f5f5"},buttonContainer:{flexDirection:"row",justifyContent:"space-between",width:"100%"},sendButton:{backgroundColor:"#4CAF50",color:"#fff"},endButton:{backgroundColor:"#f44336",color:"#fff"}});const w=function(){var e=(0,a.useState)(""),t=(0,f.default)(e,2),r=t[0],n=t[1],d=(0,a.useState)(""),s=(0,f.default)(d,2),c=s[0],p=s[1],m=(0,a.useState)(""),b=(0,f.default)(m,2),x=b[0],w=b[1],S=(0,a.useState)([]),O=(0,f.default)(S,2),T=O[0],B=O[1];(0,a.useEffect)((function(){var e=Math.random().toString(36).substring(2);n(e),j.collection("users").doc(e).set({})}),[]),(0,a.useEffect)((function(){if(c)return j.collection("chatRooms").doc(c).collection("messages").orderBy("createdAt").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));B(t)}))}),[c]);var I=function(){var e=(0,y.default)((function*(){var e=j.collection("chatRooms"),t=yield e.where("userCount","<",2).limit(1).get();if(t.empty){var r=yield e.add({userCount:1,messages:[]});p(r.id)}else{var a=t.docs[0].ref;yield a.update({userCount:h.default.firestore.FieldValue.increment(1)}),p(a.id)}}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,y.default)((function*(){var e=h.default.firestore.FieldValue.serverTimestamp(),t={text:x,createdAt:e};yield j.collection("chatRooms").doc(c).collection("messages").add(t),w("")}));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,y.default)((function*(){yield j.collection("chatRooms").doc(c).update({userCount:h.default.firestore.FieldValue.increment(-1)}),B([]),p("")}));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(o.default,{style:C.container,children:[(0,g.jsxs)(o.default,{style:C.header,children:[(0,g.jsxs)(i.default,{style:C.headerText,children:["User ID: ",r]}),(0,g.jsxs)(i.default,{style:C.headerText,children:["Chat Room ID: ",c]}),(0,g.jsx)(l.default,{title:"Start Chat",onPress:I,style:C.startButton})]}),(0,g.jsx)(v.default,{style:C.messagesContainer,children:T.map((function(e,t){return(0,g.jsx)(o.default,{style:C.messageBox,children:(0,g.jsx)(i.default,{style:C.messageText,children:e.text})},t)}))}),(0,g.jsxs)(o.default,{style:C.inputContainer,children:[(0,g.jsx)(u.default,{style:C.input,value:x,onChangeText:w,placeholder:"Type your message here..."}),(0,g.jsxs)(o.default,{style:C.buttonContainer,children:[(0,g.jsx)(l.default,{title:"Send Message",onPress:k,style:C.sendButton}),(0,g.jsx)(l.default,{title:"End Chat",onPress:R,style:C.endButton})]})]})]})};function S(e){var t=e.navigation;return(0,g.jsxs)(o.default,{style:B.container,children:[(0,g.jsx)(i.default,{children:"Welcome to Home Screen!"}),(0,g.jsx)(l.default,{title:"Group Chat",onPress:function(){return t.navigate("Chat")}}),(0,g.jsx)(l.default,{title:"Text Chat",onPress:function(){return t.navigate("Omegle")}})]})}var O=(0,s.default)();function T(){return(0,g.jsx)(d.default,{children:(0,g.jsxs)(O.Navigator,{initialRouteName:"Home",children:[(0,g.jsx)(O.Screen,{name:"Home",component:S}),(0,g.jsx)(O.Screen,{name:"Chat",component:b}),(0,g.jsx)(O.Screen,{name:"Omegle",component:w})]})})}var B=n.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"}})}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(t,a,n,o)=>{if(!a){var i=1/0;for(f=0;f<e.length;f++){for(var[a,n,o]=e[f],l=!0,d=0;d<a.length;d++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](a[d])))?a.splice(d--,1):(l=!1,o<i&&(i=o));if(l){e.splice(f--,1);var s=n();void 0!==s&&(t=s)}}return t}o=o||0;for(var f=e.length;f>0&&e[f-1][2]>o;f--)e[f]=e[f-1];e[f]=[a,n,o]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"===typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"===typeof a.then)return a}var o=Object.create(null);r.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&n&&a;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>i[e]=()=>a[e]));return i.default=()=>a,r.d(o,i),o}})(),r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[i,l,d]=a,s=0;if(i.some((t=>0!==e[t]))){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(d)var f=d(r)}for(t&&t(a);s<i.length;s++)o=i[s],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(f)},a=self.webpackChunkweb=self.webpackChunkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[633],(()=>r(6271)));a=r.O(a)})();
//# sourceMappingURL=main.18006d20.js.map